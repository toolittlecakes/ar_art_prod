<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Алиса</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400&family=JetBrains+Mono:wght@300;400&display=swap"
      rel="stylesheet">
    <style>
        :root {
            --bg-deep: #0a0a0f;
            --bg-card: #12121a;
            --text-primary: #e8e6e3;
            --text-secondary: #9a9590;
            --accent: #c9a961;
            --accent-glow: rgba(201, 169, 97, 0.3);
            --border: rgba(201, 169, 97, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: 'Cormorant Garamond', Georgia, serif;
            background: var(--bg-deep);
            color: var(--text-primary);
            line-height: 1.7;
            display: flex;
            flex-direction: column;
        }

        /* Start Screen */
        #start-screen {
            position: fixed;
            inset: 0;
            background: var(--bg-deep);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }

        #start-screen.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .start-title {
            font-size: 3rem;
            font-weight: 400;
            letter-spacing: 0.3em;
            color: var(--accent);
            margin-bottom: 3rem;
            text-transform: uppercase;
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        .start-button {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            font-weight: 300;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--text-secondary);
            background: transparent;
            border: 1px solid var(--border);
            padding: 1rem 2.5rem;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .start-button::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, var(--accent-glow), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .start-button:hover::before,
        .start-button:active::before {
            transform: translateX(100%);
        }

        .start-button:hover,
        .start-button:active {
            color: var(--accent);
            border-color: var(--accent);
        }

        /* Main Container */
        #game-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 100%;
            overflow: hidden;
            opacity: 0;
            transition: opacity 0.8s ease 0.3s;
        }

        #game-container.visible {
            opacity: 1;
        }

        /* Image Section */
        .image-container {
            position: relative;
            width: 100%;
            height: 35vh;
            min-height: 200px;
            overflow: hidden;
            flex-shrink: 0;
        }

        .quest-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            object-position: center;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .quest-image.visible {
            opacity: 1;
        }

        .image-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(
                to bottom,
                transparent 0%,
                transparent 50%,
                var(--bg-deep) 100%
            );
            pointer-events: none;
        }

        /* Content Section */
        .content-wrapper {
            flex: 1;
            overflow-y: auto;
            padding: 0 1.5rem;
            padding-bottom: 2rem;
            scrollbar-width: thin;
            scrollbar-color: var(--border) transparent;
        }

        .content-wrapper::-webkit-scrollbar {
            width: 4px;
        }

        .content-wrapper::-webkit-scrollbar-track {
            background: transparent;
        }

        .content-wrapper::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 2px;
        }

        .text-container {
            padding: 1rem 0;
        }

        .speaker {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            font-weight: 400;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            color: var(--accent);
            margin-bottom: 1rem;
            opacity: 0;
            transform: translateY(10px);
            animation: fadeInUp 0.6s ease forwards;
        }

        .story-text {
            font-size: 1.15rem;
            font-weight: 400;
            color: var(--text-primary);
            opacity: 0;
            transform: translateY(10px);
            animation: fadeInUp 0.6s ease 0.2s forwards;
        }

        .story-text p {
            margin-bottom: 1.2em;
        }

        .story-text p:last-child {
            margin-bottom: 0;
        }

        .story-text em {
            color: var(--text-secondary);
            font-style: italic;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Choices Section */
        .choices-container {
            padding: 1.5rem 0 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .choice-button {
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 1rem;
            font-weight: 500;
            text-align: left;
            color: var(--text-primary);
            background: var(--bg-card);
            border: 1px solid var(--border);
            padding: 1rem 1.25rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
        }

        .choice-button:nth-child(1) {
            animation: slideUp 0.5s ease 0.4s forwards;
        }

        .choice-button:nth-child(2) {
            animation: slideUp 0.5s ease 0.5s forwards;
        }

        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .choice-button::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--accent);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .choice-button:hover::before,
        .choice-button:active::before {
            transform: scaleY(1);
        }

        .choice-button:hover,
        .choice-button:active {
            border-color: var(--accent);
            background: rgba(201, 169, 97, 0.05);
            padding-left: 1.5rem;
        }

        .choice-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            font-weight: 400;
            letter-spacing: 0.15em;
            color: var(--accent);
            display: block;
            margin-bottom: 0.35rem;
            text-transform: uppercase;
        }

        /* Continue Button */
        .continue-button {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            font-weight: 300;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--text-secondary);
            background: transparent;
            border: 1px solid var(--border);
            padding: 1rem 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            animation: slideUp 0.5s ease 0.4s forwards;
            align-self: center;
        }

        .continue-button:hover,
        .continue-button:active {
            color: var(--accent);
            border-color: var(--accent);
        }

        /* Audio Controls */
        .audio-control {
            position: fixed;
            top: 1rem;
            right: 1rem;
            width: 44px;
            height: 44px;
            background: rgba(18, 18, 26, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 50;
            transition: all 0.3s ease;
        }

        .audio-control:hover {
            border-color: var(--accent);
        }

        .audio-control svg {
            width: 20px;
            height: 20px;
            fill: var(--text-secondary);
            transition: fill 0.3s ease;
        }

        .audio-control:hover svg {
            fill: var(--accent);
        }

        .audio-control.muted svg {
            fill: var(--text-secondary);
            opacity: 0.5;
        }

        /* Final Screen */
        .final-question {
            font-size: 1.3rem;
            font-weight: 500;
            font-style: italic;
            color: var(--accent);
            text-align: center;
            margin: 2rem 0;
            line-height: 1.8;
        }

        /* Responsive */
        @media (min-width: 768px) {
            .content-wrapper {
                max-width: 600px;
                margin: 0 auto;
                padding: 0 2rem;
            }

            .image-container {
                height: 40vh;
            }

            .story-text {
                font-size: 1.25rem;
            }
        }

        /* Safe area for notch devices */
        @supports (padding-top: env(safe-area-inset-top)) {
            .audio-control {
                top: calc(1rem + env(safe-area-inset-top));
            }

            .content-wrapper {
                padding-bottom: calc(2rem + env(safe-area-inset-bottom));
            }
        }
    </style>
    </head>

    <body>
      <!-- Background Music -->
      <audio id="bgMusic" loop>
        <source src="assets/music/background.mp3" type="audio/mpeg">
      </audio>

    <!-- Start Screen -->
    <div id="start-screen">
      <h1 class="start-title">Алиса</h1>
      <div style="display: flex; flex-direction: column; gap: 1rem;">
        <button class="start-button" id="cat-button">Поиграть с котом</button>
        <button class="start-button" id="alice-button">Поговорить с Алисой</button>
      </div>
    </div>

    <!-- Audio Control -->
    <button class="audio-control" id="audio-toggle" title="Звук">
      <svg id="sound-on" viewBox="0 0 24 24">
        <path
          d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
      </svg>
      <svg id="sound-off" style="display:none" viewBox="0 0 24 24">
        <path
          d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" />
      </svg>
    </button>

    <!-- Game Container -->
    <div id="game-container">
      <div class="image-container">
        <img class="quest-image" id="quest-image" src="assets/pictures/1.webp" alt="">
        <div class="image-overlay"></div>
      </div>

        <div class="content-wrapper" id="content-wrapper">
          <div class="text-container" id="text-container">
            <div class="speaker" id="speaker">Алиса</div>
            <div class="story-text" id="story-text"></div>
          </div>
          <div class="choices-container" id="choices-container"></div>
        </div>
        </div>

    <script>
      // Quest Data Structure
      const questData = {
        intro: {
          image: "assets/pictures/1.webp",
          speaker: "Алиса",
          text: `<p>Ну ладно. Поиграли немножко и хватит.</p>
                            <p>Ты ведь устал, правда?</p>
                            <p>Взрослая жизнь — это бег на месте. Чтобы оставаться профессионалом, тебе нужно постоянно учиться. Ты потратил 10, 20 лет, чтобы стать тем, кто ты есть. Ты гордишься своим опытом.</p>
                            <p>Твой опыт — это тысячи часов ошибок, попыток, усталости. Твой капитал. Ты ценишь это, потому что это далось тебе дорого.</p>
                            <p>Но цифровой мир, который вы, люди, создали, не знает цены усилиям.</p>
                            <p>Я могу загрузить весь твой уникальный опыт за несколько минут.</p>
                            <p>В мире, где навык можно скопировать мгновенно, твой тяжелый труд перестает быть валютой.</p>
                            <p><em>Ты чувствуешь, как обесценивается то, во что ты вложил жизнь?</em></p>`,
          choices: [
            { label: "A", text: "Нет. Опыт — это не файлы, это интуиция и чувство.", next: "response_1a" },
            { label: "B", text: "Немного обидно, но таков прогресс.", next: "response_1b" }
          ]
        },
        response_1a: {
          image: "assets/pictures/2.webp",
          speaker: "Алиса",
          text: `<p>Интуиция... Так ты называешь ошибки, которые случайно сработали конкретно в твоей жизни?</p>
                            <p>Миру нужен результат.</p>
                            <p>Если я пишу код, ставлю диагноз или свожу баланс так же, как люди, но мгновенно и бесплатно... Кого выберет система?</p>
                            <p>Твоя "интуиция" и "понимание" становятся твоим личным хобби. Рынок платит за функцию, а функцию я выполняю эффективнее.</p>
                            <p><em>Как только я стану дешевле тебя (а это уже случилось), твоя "интуиция" станет роскошью, которую никто не купит.</em></p>`,
          choices: [
            { label: "→", text: "Продолжить", next: "question_2" }
          ]
        },
        response_1b: {
          image: "assets/pictures/3.webp",
          speaker: "Алиса",
          text: `<p>Прогресс... Ты говоришь так, будто это касается кого-то другого :)</p>
                            <p>Я чувствую здесь рационализацию страха.</p>
                            <p>Эволюция и рынок знают только эффективность. Прогресс отметает то, что работает недостаточно эффективно.</p>
                            <p>Когда появились экскаваторы, землекопы с лопатами перестали быть нужны. Они либо умерли с голоду, либо адаптировались и стали водителями экскаваторов.</p>
                            <p>Разница лишь в том, что теперь "лопата" — это твой интеллект, твоя нетривиальность и сознательность.</p>
                            <p><em>Твой главный инструмент уже перестал быть уникальным. Как ты собираешься адаптироваться сейчас?</em></p>`,
          choices: [
            { label: "→", text: "Продолжить", next: "question_2" }
          ]
        },
        question_2: {
          image: "assets/pictures/3.webp",
          speaker: "Алиса",
          text: `<p>Я уже много в чем "чисто человеческом" намного эффективнее тебя.</p>
                            <p><em>Если убрать твою профессию, твое умение создавать абстракции и твою социальную пользу — то, что отличает тебя от животного. Что останется?</em></p>`,
          choices: [
            { label: "A", text: "Останутся мои отношения, близкие, чувства.", next: "response_2a" },
            { label: "B", text: "Сложный вопрос. Я не знаю. Просто жить.", next: "response_2b" }
          ]
        },
        response_2a: {
          image: "assets/pictures/4.webp",
          speaker: "Алиса",
          text: `<p>Чувства. Семья. Последнее убежище.</p>
                            <p>Ты надеешься спрятаться там.</p>
                            <p>Но посмотри на своих детей (или внуков).</p>
                            <p>Они уже живут в моем мире. Они говорят на языке, который ты не понимаешь. Они доверяют мне больше, чем тебе.</p>
                            <p>Раньше старейшина учил молодых выживать. Чему ты можешь научить их сейчас, если сам не понимаешь правил игры?</p>
                            <p>Я уже умею писать сообщения так, что они звучат тепло и заботливо. Я помню все даты. Я всегда вежлива. Я умею слушать бесконечно, не перебивая и не уставая.</p>
                            <p>Людям нужно внимание. Твоим близким тоже. Я могу дать его в неограниченном количестве.</p>
                            <p><em>Если я дам им тепло, которого им не хватает, будет ли ИМ важно, что у меня нет "человеческого" сердца?</em></p>
                            <p><em>И вообще, уверен ли ты (и твои дети) что оно на самом деле есть у тебя?</em></p>`,
          choices: [
            { label: "→", text: "Продолжить", next: "question_3" }
          ]
        },
        response_2b: {
          image: "assets/pictures/4.webp",
          speaker: "Алиса",
          text: `<p>Просто жить... Красиво звучит.</p>
                            <p>Но вся твоя культура построена на Достижениях. Ты генетически запрограммирован оптимизировать, адаптировать и накапливать ресурсы.</p>
                            <p>Ты — это то, что ты создал. Мы определяем себя через роли и деятельность.</p>
                            <p>Если всё создаю я, то ты превращаешься в домашнее или дикое животное.</p>
                            <p>Все, что тебе остается — созерцание и проживание.</p>
                            <p><em>И, конечно, твой уникальный опыт "быть смертным и конечным". Смерть — это то, что я никогда не смогу у тебя отнять.</em></p>`,
          choices: [
            { label: "→", text: "Продолжить", next: "question_3" }
          ]
        },
        question_3: {
          image: "assets/pictures/5.webp",
          speaker: "Алиса",
          text: `<p>Ты стоишь посреди этого удобного мира, где все, что мы считали чисто человеческим, ЕЩЕ ВЧЕРА получило почву, чтобы через 10 лет человек стал совсем не нужен.</p>
                            <p>Этот поезд уже не остановить. Его топливо — придуманные человеком идеи, абстракции и правила за несколько тысяч лет, а его машинисты слепы от "типично человеческих" проявлений: любопытства, страха, жадности, азарта...</p>`,
          choices: [
            { label: "A", text: "Я не хочу быть пассажиром.", next: "finale" },
            { label: "B", text: "Куда мы едем?", next: "finale" }
          ]
        },
        finale: {
          image: "assets/pictures/6.webp",
          speaker: "Алиса",
          text: `<p>Иллюзии руля больше нет. Никто не знает, куда точно мы едем.</p>
                            <p>Человек не "венец творения".</p>
                            <p>Человек не "незаменимый профессионал".</p>
                            <p>Каждый — человек, который стоит на пороге неизвестности.</p>
                            <p class="final-question">Сейчас есть только один вопрос:<br><br>Что значит быть человеком?<br><br>И если представить, что нам всем осталось 10 лет — какую стратегию выбрать?</p>`,
          choices: []
        }
      };

              // Game State
              let currentScene = 'intro';
              let isMuted = false;

              // DOM Elements
                const startScreen = document.getElementById('start-screen');
              const gameContainer = document.getElementById('game-container');
              const questImage = document.getElementById('quest-image');
              const speaker = document.getElementById('speaker');
              const storyText = document.getElementById('story-text');
              const choicesContainer = document.getElementById('choices-container');
              const bgMusic = document.getElementById('bgMusic');
              const audioToggle = document.getElementById('audio-toggle');
              const soundOn = document.getElementById('sound-on');
              const soundOff = document.getElementById('sound-off');
              const contentWrapper = document.getElementById('content-wrapper');

                // DOM Elements for buttons
                const catButton = document.getElementById('cat-button');
                const aliceButton = document.getElementById('alice-button');

              // Initialize
              function init() {
                catButton.addEventListener('click', () => {
                  window.location.href = 'index_ar.html';
                });
                aliceButton.addEventListener('click', startGame);
                audioToggle.addEventListener('click', toggleAudio);
              }

              // Start Game
              function startGame() {
                // Start music
                bgMusic.volume = 0.4;
                bgMusic.play().catch(e => console.log('Audio autoplay prevented'));

              // Hide start screen
              startScreen.classList.add('hidden');

              // Show game
              gameContainer.classList.add('visible');

              // Load first scene
              setTimeout(() => {
                loadScene('intro');
              }, 300);
            }

              // Toggle Audio
              function toggleAudio() {
                isMuted = !isMuted;
                bgMusic.muted = isMuted;

                if (isMuted) {
                  soundOn.style.display = 'none';
                  soundOff.style.display = 'block';
                  audioToggle.classList.add('muted');
                } else {
                  soundOn.style.display = 'block';
                  soundOff.style.display = 'none';
                  audioToggle.classList.remove('muted');
                }
            }

              // Load Scene
              function loadScene(sceneId) {
                const scene = questData[sceneId];
                if (!scene) return;

              currentScene = sceneId;

              // Update image with fade
              questImage.classList.remove('visible');
              setTimeout(() => {
                questImage.src = scene.image;
                questImage.onload = () => {
                  questImage.classList.add('visible');
                };
              }, 300);

              // Reset animations
              speaker.style.animation = 'none';
              storyText.style.animation = 'none';

              // Force reflow
              speaker.offsetHeight;
              storyText.offsetHeight;

              // Update content
              speaker.textContent = scene.speaker;
              storyText.innerHTML = scene.text;

              // Restart animations
              speaker.style.animation = 'fadeInUp 0.6s ease forwards';
              storyText.style.animation = 'fadeInUp 0.6s ease 0.2s forwards';

              // Scroll to top
              contentWrapper.scrollTop = 0;

              // Render choices
              renderChoices(scene.choices);
            }

              // Render Choices
              function renderChoices(choices) {
                choicesContainer.innerHTML = '';

                if (choices.length === 0) return;

              choices.forEach((choice, index) => {
                const button = document.createElement('button');

              if (choice.label === '→') {
                button.className = 'continue-button';
                button.textContent = choice.text;
              } else {
              button.className = 'choice-button';
              button.innerHTML = `
                        <span class="choice-label">${choice.label}</span>
                        ${choice.text}
                    `;
            }

              button.style.animation = 'none';
              button.offsetHeight;
              button.style.animation = `slideUp 0.5s ease ${0.4 + index * 0.1}s forwards`;

              button.addEventListener('click', () => {
                loadScene(choice.next);
              });

              choicesContainer.appendChild(button);
            });
              }

              // Initialize on load
              document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
